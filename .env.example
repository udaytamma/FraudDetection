# Fraud Detection Platform - Environment Configuration
# Copy to .env and update values for your environment

# Application
APP_ENV=development
APP_DEBUG=true
APP_LOG_LEVEL=INFO

# Redis Configuration
# Uses 'fraud:' key prefix to avoid conflicts
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_KEY_PREFIX=fraud:

# PostgreSQL Configuration
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=fraud_detection
POSTGRES_USER=fraud_user
POSTGRES_PASSWORD=fraud_dev_password

# API Configuration
API_HOST=0.0.0.0
API_PORT=8000
API_WORKERS=1

# Access Control (optional - if not set, endpoints are open)
# Generate tokens: python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# API_TOKEN: Required for /decide and /policy/* read endpoints
# ADMIN_TOKEN: Required for /policy/reload (policy mutation)
# METRICS_TOKEN: Required for /metrics and /metrics/summary
#
# API_TOKEN=your-api-token
# ADMIN_TOKEN=your-admin-token
# METRICS_TOKEN=your-metrics-token

# CORS Configuration (comma-separated origins)
# Uncomment and set allowed origins for cross-origin requests
# CORS_ALLOW_ORIGINS=http://localhost:3000,http://localhost:8501

# Latency Targets (milliseconds)
TARGET_E2E_LATENCY_MS=200
TARGET_FEATURE_LATENCY_MS=50
TARGET_SCORING_LATENCY_MS=25

# Metrics
METRICS_ENABLED=true
METRICS_EXTERNAL_ENABLED=false
METRICS_PORT=9100

# Safe Mode
SAFE_MODE_ENABLED=false
SAFE_MODE_DECISION=ALLOW

# Evidence Vault (Compliance)
# Two-table architecture: fraud_evidence (hashed) + evidence_vault (encrypted)
#
# Generate Fernet key for vault encryption:
#   python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
#
# Generate HMAC key for identifier hashing:
#   python -c "import secrets; print(secrets.token_urlsafe(32))"
#
# IMPORTANT: Store these keys securely. Loss = unrecoverable data.
# Production: Use secrets manager (AWS Secrets Manager, HashiCorp Vault, etc.)
#
EVIDENCE_VAULT_KEY=
EVIDENCE_HASH_KEY=

# Retention period for evidence (days) - 730 = 2 years for chargeback disputes
EVIDENCE_RETENTION_DAYS=730

# Idempotency TTL (hours) - how long to cache decision responses
IDEMPOTENCY_TTL_HOURS=24
